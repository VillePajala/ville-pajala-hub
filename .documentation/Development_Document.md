# Development Guide

## 1. Development Environment Setup

### 1.1 Prerequisites
- Node.js (v18.x or later)
- npm (v9.x or later)
- Git
- VS Code or Cursor IDE
- WSL2 (for Windows users)

### 1.2 Required Tools & Extensions
- **Cursor IDE**: For AI-assisted development
- **VS Code Extensions**:
  - ESLint
  - Prettier
  - Tailwind CSS IntelliSense
  - TypeScript and JavaScript Language Features
  - GitLens
  - Error Lens

### 1.3 Environment Setup Steps

1. **Clone the Repository**
```bash
git clone https://github.com/your-username/ville-pajala-hub.git
cd ville-pajala-hub
```

2. **Install Dependencies**
```bash
npm install
```

3. **Set Up Environment Variables**
```bash
cp .env.example .env.local
```

4. **Start Development Server**
```bash
npm run dev
```

## 2. Project Structure

```
ville-pajala-hub/
├── .cursor/                  # Cursor IDE configuration
├── .documentation/           # Project documentation
├── .github/                  # GitHub Actions workflows
├── .timemanagement/         # Time tracking and analysis
├── app/                     # Next.js app directory
│   ├── components/         # React components
│   ├── lib/               # Utility functions
│   ├── styles/           # Global styles
│   └── [routes]/        # App routes
├── public/               # Static assets
├── sanity/              # Sanity.io configuration
├── types/               # TypeScript types
└── package.json         # Project dependencies
```

## 3. Development Workflow

### 3.1 Branch Strategy
- `main` - Production branch
- `develop` - Development branch
- `feature/*` - Feature branches
- `bugfix/*` - Bug fix branches
- `release/*` - Release branches

### 3.2 Commit Convention
```
type(scope): description

[optional body]

[optional footer]
```

**Types**:
- `feat`: New feature
- `fix`: Bug fix
- `docs`: Documentation
- `style`: Formatting
- `refactor`: Code restructuring
- `test`: Tests
- `chore`: Maintenance

### 3.3 Development Process
1. Create feature branch
2. Implement changes
3. Write/update tests
4. Update documentation
5. Create pull request
6. Code review
7. Merge to develop

## 4. Code Style Guide

### 4.1 TypeScript Guidelines
- Use strict type checking
- Avoid `any` type
- Use interfaces for objects
- Document complex types

### 4.2 React Guidelines
- Use functional components
- Implement proper error boundaries
- Follow React hooks best practices
- Maintain component modularity

### 4.3 CSS/Tailwind Guidelines
- Follow utility-first approach
- Use custom design system tokens
- Maintain responsive design patterns
- Follow BEM naming for custom CSS

## 5. Testing Guidelines

### 5.1 Unit Testing
```typescript
// Example component test
describe('Button', () => {
  it('renders correctly', () => {
    render(<Button>Click me</Button>);
    expect(screen.getByText('Click me')).toBeInTheDocument();
  });
});
```

### 5.2 Integration Testing
```typescript
// Example integration test
describe('Blog Post', () => {
  it('loads and displays content', async () => {
    render(<BlogPost id="123" />);
    await waitFor(() => {
      expect(screen.getByRole('article')).toBeInTheDocument();
    });
  });
});
```

## 6. AI-Driven Development

### 6.1 Cursor IDE Integration
- Use Claude 3.5 for code assistance
- Follow prompt engineering best practices
- Document AI-generated code
- Review and refactor AI suggestions

### 6.2 AI Development Workflow
1. Define clear requirements
2. Generate initial code with AI
3. Review and refactor
4. Add tests and documentation
5. Commit with AI attribution

### 6.3 AI Documentation
```typescript
/**
 * @ai-generated
 * @description Generated by Claude 3.5
 * @prompt "Create a function to filter blog posts by category"
 * @review Reviewed and approved by [Developer Name]
 */
```

## 7. Performance Guidelines

### 7.1 Frontend Performance
- Implement code splitting
- Optimize images
- Use proper caching strategies
- Monitor Core Web Vitals

### 7.2 API Performance
- Implement proper error handling
- Use appropriate caching
- Monitor response times
- Optimize database queries

## 8. Security Guidelines

### 8.1 Authentication
- Use Clerk for user management
- Implement proper role-based access
- Secure API routes
- Handle sessions properly

### 8.2 Data Security
- Validate user input
- Sanitize data output
- Use proper encryption
- Follow GDPR guidelines

## 9. Content Management

### 9.1 Sanity.io Guidelines
- Follow schema best practices
- Use proper content modeling
- Implement preview functionality
- Handle media assets properly

### 9.2 Content Workflow
1. Create content in Sanity
2. Preview changes
3. Schedule or publish
4. Verify on staging
5. Deploy to production

## 10. Database Guidelines

### 10.1 Supabase Setup
- Follow schema design principles
- Implement proper indexes
- Use row level security
- Monitor query performance

### 10.2 Database Operations
```sql
-- Example RLS policy
CREATE POLICY "Public posts are viewable by everyone"
ON posts FOR SELECT
USING (published = true);
```

## 11. Monitoring & Debugging

### 11.1 Development Tools
- React Developer Tools
- Redux DevTools
- Network Inspector
- Performance Monitor

### 11.2 Logging Guidelines
```typescript
// Example logging
logger.info('User action', {
  userId: user.id,
  action: 'post_comment',
  timestamp: new Date()
});
```

## 12. Deployment Process

### 12.1 Local Testing
1. Run all tests
2. Build production version
3. Test with production flags
4. Verify all features

### 12.2 Staging Deployment
1. Merge to develop
2. Automatic deployment
3. Run integration tests
4. Verify functionality

## 13. Documentation Guidelines

### 13.1 Code Documentation
- Use JSDoc comments
- Document complex logic
- Explain business rules
- Update README files

### 13.2 API Documentation
- Document all endpoints
- Provide usage examples
- Include error responses
- Keep docs up-to-date

## 14. Resources

### 14.1 Official Documentation
- [Next.js Documentation](https://nextjs.org/docs)
- [Sanity.io Documentation](https://www.sanity.io/docs)
- [Supabase Documentation](https://supabase.io/docs)
- [Clerk Documentation](https://docs.clerk.dev)

### 14.2 Style Guides
- [TypeScript Style Guide](https://google.github.io/styleguide/tsguide.html)
- [React Style Guide](https://reactjs.org/docs/code-splitting.html)
- [Tailwind Best Practices](https://tailwindcss.com/docs/best-practices)

## 15. Troubleshooting

### 15.1 Common Issues
- Next.js build errors
- Sanity.io connection issues
- Supabase query problems
- Authentication errors

### 15.2 Solutions
- Clear `.next` cache
- Verify environment variables
- Check API endpoints
- Review error logs 